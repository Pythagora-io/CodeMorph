<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head.ejs') %>
<body>
<%- include('partials/_header.ejs') %>
  <main role="main" class="container mt-4">
    <h1>User Profile</h1>
    <p>Username: <%= user.username %></p>
    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" class="form-control" id="email" name="email" value="<%= user.email %>" readonly>
    </div>
    <form id="profileForm">
      <div class="mb-3">
        <label for="openaiKey" class="form-label">OpenAI API Key</label>
        <input type="password" class="form-control" id="openaiKey" name="openaiKey" value="<%= user.openaiKey || '' %>">
        <% if (errors && errors.openai) { %>
          <div class="text-danger"><%= errors.openai %></div>
        <% } %>
      </div>
      <div class="mb-3">
        <label for="githubKey" class="form-label">GitHub API Key</label>
        <input type="password" class="form-control" id="githubKey" name="githubKey" value="<%= user.githubKey || '' %>">
        <% if (errors && errors.github) { %>
          <div class="text-danger"><%= errors.github %></div>
        <% } %>
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
    <div id="message" class="mt-3"></div>
  </main>
<%- include('partials/_footer.ejs') %>
<script src="/js/profile.js"></script>
</body>
</html>